#pragma once

#include "../Entity.h"
#include "../../Constraints.h"
#include "../../Game/GameRequest.h"

class CEnemy: public CEntity
{
private:
	int maxHealth;
	int health;

protected:
	void SetMaxHealth(int mh);

public:
	CEnemy();

	virtual void Update(DWORD dt);

	void InflictDamage(int dam);

	void something();
};

#include "Enemy.h"

void CEnemy::SetMaxHealth(int mh) {
	maxHealth = mh;
	health = mh;
}

CEnemy::CEnemy()
{
	SetMaxHealth(1);
}

void CEnemy::Update(DWORD dt)
{
	if (health == 0)
	{
		LPRequest request = new CGameRequest(REQUEST_TYPES::DeleteEntity);
		request->id = this->id;
		CGame::GetInstance()->AddRequest(request);
	}
}

void CEnemy::InflictDamage(int dam)
{
	health = max(0, health - dam);
}

void CEnemy::something()
{
}
